"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Throttle = void 0;
const throttleConfig = {
    lookup: {
        rps: 15,
        delay: Math.ceil(1000 / 15), // ~67ms between requests
    },
    default: {
        rps: 8,
        delay: Math.ceil(1000 / 8), // 125ms between requests
    },
};
// Simple delay function
const delay = (ms) => new Promise(resolve => setTimeout(resolve, Math.max(0, ms)));
// Track last request times
let lastDefaultRequest = 0;
let lastLookupRequest = 0;
class Throttle {
    static async check(type = 'default') {
        const now = Date.now();
        const config = throttleConfig[type];
        if (type === 'lookup') {
            const timeSinceLastRequest = now - lastLookupRequest;
            const waitTime = config.delay - timeSinceLastRequest;
            if (waitTime > 0) {
                await delay(waitTime);
            }
            lastLookupRequest = Date.now();
        }
        else {
            const timeSinceLastRequest = now - lastDefaultRequest;
            const waitTime = config.delay - timeSinceLastRequest;
            if (waitTime > 0) {
                await delay(waitTime);
            }
            lastDefaultRequest = Date.now();
        }
    }
}
exports.Throttle = Throttle;
//# sourceMappingURL=throttle.js.map